import time, requests, pathlib, urllib.parse, os, threading

import json
import sys
import msvcrt
from subprocess import Popen

currentpath = str(pathlib.Path(__file__).parent.absolute())



def startGame(placeID, j, Cookie):
    print("checking latest version of ROBLOX... ", end = "")
    version = requests.get("http://setup.roblox.com/version.txt").content.decode("ascii")
    path = "C:\\Program Files (x86)\\Roblox\\Versions\\"+version
    print("done! ("+version+")")

    if not os.path.exists(path):
        print("updating ROBLOX, please wait... ", end = "")
        bootstrapper = requests.get("http://setup.roblox.com/RobloxPlayerLauncher.exe")
        open(currentpath+"\\RobloxPlayerLauncher.exe", "wb").write(bootstrapper.content)
        os.system('"'+currentpath+'\\RobloxPlayerLauncher.exe" -install')
        print("done!")

    print("fetching CSRF token... ", end = "")
    req = requests.post(
        "https://auth.roblox.com/v1/authentication-ticket",
        headers = {"Cookie": ".ROBLOSECURITY="+Cookie}
    )
    csrf = req.headers['x-csrf-token']
    print("done!")

    print("fetching authentication ticket... ", end = "")
    req = requests.post(
        "https://auth.roblox.com/v1/authentication-ticket",
        headers =
        {
            "Cookie": ".ROBLOSECURITY="+Cookie,
            "Origin": "https://www.roblox.com",
            "Referer": "https://www.roblox.com/",
            "X-CSRF-TOKEN": csrf
        }
    )

    if(len(req.content) > 2):
        die("failed!\n\ncould not fetch authentication ticket - check that your .ROBLOSECURITY cookie is valid")

    ticket = req.headers['rbx-authentication-ticket']
    print("done!")

    print("\nstarting ROBLOX... ")

    if config['LaunchMode'] == "RobloxBootstrapper":
        location = path+"\\RobloxPlayerLauncher.exe"
        args = "roblox-player:1+launchmode:play+gameinfo:{ticket}+launchtime:{timestamp}+placelauncherurl:https%3A%2F%2Fassetgame.roblox.com%2Fgame%2FPlaceLauncher.ashx%3Frequest%3DRequestGame%26placeId%3D{placeID}%26isPlayTogetherGame%3Dfalse"
    elif config['LaunchMode'] == "DirectLaunch":
        location = path+"\\RobloxPlayerBeta.exe"
        args = "--play -a https://auth.roblox.com/v1/authentication-ticket/redeem -t {ticket} -j https://assetgame.roblox.com/game/PlaceLauncher.ashx?request=RequestGame&placeId={placeID}&isPlayTogetherGame=false --launchtime={timestamp}"

    print(location);
    Popen([location, args.format(ticket = ticket, timestamp = '{0:.0f}'.format(round(time.time() * 1000)), placeID = placeID)])

    time.sleep(10000)

config = {
    "Cookies": [
        #"_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_11A6B68CE95672138018F2CE835A49DDBAEAAB72DF133D3595E05A003B143BB2F0E2F7E51759B6AF6CCA5FA86A9A4B7C9C5C4459FAEDB77E83DEF0AB1B72F1192086BEDC4DC27652384ABFD8F14FF414B96B82000BE52809CABD0E965C07A94B2317592B8BAF18C4F27ED413B956EE93254E7F8C994AE5842E83EFEFBC3839E0ECDE587DC9359CDCFA18B26254F3A3D7C51D49BCD2665D62DD5A00CD545BD4396145396D575F4F5BA594E058F75FD6EB6FDE0552C27A9E1AF09B6DDDE913EBE159DDE8AFD16C306738359B9A2C50B9DBE722E19D501AB111510F17AA779200B692B3E10F7825B2A356400318530E84D283906A66372793A6807C7CF098EB387FF0AC25B1C3A0663977EBF7000885CF2C1872C35E494E0BC9A789B2B6B8654DBD4BA1AC27D8AE200409C482E228D8E4D07E2579F537C0A7AC2BC7EE7DC7245E9572B918520B5B9DA8C29CD77AA0C8566954A45939105F042C79FE586BA19BD4FF556F88C46FA4ABD94A65B4BFEE70C652D485DEE9834F21A65FB4CF06C90E5FCDA110DB7599F52F556801CB6E662F72710FDE9F6BC270955F2CAA0E11A737657D571C49C467F4B36F3468581CB480134303ABF65FBC86C8ABD006E98F792B151C413983D7BE014411B1583CAE4182CF5CF86636A3E1240CB5F09E1B1F0E9DDBB473F7E02296E81F4064E36FD3DD083091491DFF25682C0EBEFE4351521D8BFCB9EB155FB61926E67F401B0A54535FB0D3D1D7851411A317876CCAD2EE465DD534353C31E582AFEBA0B522A1C5C88C51B442CBB670BEA536A7CA86A1BA843503067DFDDA67895C9857275FBA53D31DB3D36C40CF02EE59C8FDEF6812F9F690EA469C791C0F2855B9DA32684A6274268DD52D4B711FE87BEE45D1FBF158E91D7904653B731577A5AF0FD81EDCF849CD92691569C61E99AF34AC190B6C9A8BFCC98362520755",    "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_FF54257A5D22EB4EE4C925C122F9A8F4DAB4BAF2CEF7BF4376B6F465F8E1CE0CA21B7FBB6844D974C6907310B01548F32F7925AF88E0EEBB28BBC142F5FFB8A5C05C87F7422F0B6655A74967CB605395E8BF1D4C8B51A0A8C8545681FB736C9B762CCE607B440C5CF2EC5CE57177B786B1AC045B0A3BEBF10DAFB60FC28545E41696464AFDF5DE14D420A2C35D7ED219D2E054F40DAEA869DD22F1F0013D8913303B31EB6BD34F3BDEAD661A960D883F0EED0106FBEC8421F4B41F99DBD0FAA6778D84FCA4003A10FB3FF4A95D20B2088B9930E7807DFC748F6937B6807B21E293D494E8664F41500B492B52A3284FC28AABBEBE3035A907568414D1EC0BBC4E04D3A46918F6313EC0FCE6F46142CFA65CC48B8623706CAD9D04EF6C5DDB1E88F9E7ABA85A83E16D3AE23B476FAD76EA4C61433F5B39B37403BA13EB23E1CAEC54CF3BAD79B1C755265F66555078033AD1B73AB6FCDF88BDDAE4EF0D8371ACB542B0868C0E31C771C767F268C7CEB59294DF81E4B42B3963B174D1635562B637383475AF491F07A52A2C55ECC0D9546DABDB9D9C12D557DD672D9AD7CD5E00BEACF0C325EC18815844EF8F625065F3132F697FD10C2CF83165B83DA2E224ECA6FC23D589E5A131788E84C956E7273F61BDDBE62AE5AC2027551E2E7714ECF245DE549EE9F89886F06CD9768CE184E527CA15DF433F3B641094A8E08BC80674E02C6B324F0EB2AE7BA0F51EE45E1C443009A2613F7FBFCB119CE69AE188505761D0603B3B7420495E26B23292DADE5F1E478EDCF1274281B2A2AC88FAFD4589BE54B8C6AA665DB5076A9A48229A9AE5903708C78D7A13EB7B25A51EAC54141A754F6DB0566D145E6DB37D786E4DB5A222294F7DBDCFC37122010B8EB6930DE1DB7E98C1132AA968C6B9D9EF844F9CABC92CCE646AA5B201F93DF0AB5F3FEC20B7CB6D1FE2",    "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_8871F5CB83A136288DF4FE16BFD80E75309DB734B441A486923FEE36F90A075C32C0BFFA0CD9FB9A777F767237717C16F5D794C4C9DD71FE4CFB63F22173F7EEC832338C83603E35892F321EB2FC64C40D36987FD7A50D78A1A83867C1F27CF66DB802EC14D3363761D270728109287BD127EE836D5638F93F58588032CC3BAB10FE3A60DFF2B54E79D106AD316892581F8D739D3A1314AFF4A1275DDA3C3F82991E556BB8C93900A1BF9EF5779B70AF5ED4B996AE159504B7C277531D751567CCEBA040C65C271CCF8D00AFB8E3B306A25BA3A2674597383764DE8CEEFE41994CCF1769999ECAA6045F329C43B1097755442047EEDE3137C0360AF760D4D4E70EBEB9A1E3CA94EBDB0F9FCF3F81B09114C15C963A1948D10B7780074791F40072129126C222EF3AFEDD5280EA7B282C64C2BAFCD8BC6A80AE0242F331D74E29EF799F881226A222ED19B2F5A955E74020DD54D5908492A422C5233BAD7CACB643007E75640251A8ECA570F1ED3089F1939FD5F2F66643280A5AE9BC54230886BAB701B7118B314D88E45EE9C18CFD96A030EF8B373F586F2902F479A1C79E224BC788704503DB5B6B8B754870D6D5D9BAFBF5240970F145E260D7B23B291EE50492560E80527CFC0FB493BA2338FBE2DDDA0FBAC1B892F9328F4BF85A8E9D1EFDEF532E8BD630E60EE1F7173AD84E05B6E324932CEF0EDCD75935AFF8B198BCCC19460975C637520AF38AD29FCDC821FC0C82846198E8F3C95D03CB40A7B4EE64E9D31F5401C00B2FE706A7389CF59E760570DF494CCBC803223D9FEFC354DD349BC4D7052E0032F60F0EC3DFC84E7E9D9F9C9E1ED45E6B6B93058AB3FCA6B0F2F99AE5E3D04999A8D1429BC853BB42942EF51A65C473ADF8D01EFBB23D3EB37262190D342FEFD22F6E0ADB6742EADBD41B0EFA",    "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_9C75F9FFA557FC48A64F49835690D987E53BD48DF9D4412B41BB8232067EEDB3CA1DB89E11CAD0F49EB3D121F3F39B8B75B75E2FFAB43DA5D03B25AB65F7BFB219BE72447ED0FF1051DB127E29718337C0E12485FA65499E88A85D2A09998443EA6102079D7575EB2278E94A01E7DAFD09D2E2EED4B585E5DF795631523518FA475B9F1DD60E05DB5EEDAB750C31F02538FCCFD6AAC2F12D482606E3E8E8B9ED92D708423FD7B0EB367ED42995F4387B11EFB7A7568479A4BA05577044710A03A744994B0E71930C350C314DBA66E920808148061E2B552703B470AD7EF256E14FEC6FAEA31569309A9F15C1B172F8E519714481A3BDEE1D2664C8B5FF8DE091B9D572119A6D5500926FA01F1710B73AFE6CBECE1CACB5C9009A560D5EFF7287CB8C2349E0035917D8C1282173F6761B8414B3AED56296C9056792409C454C7CB41DB66C71A4CD259215873FF2AD9F2C58F1BB3905056EABB77A5FA7D9B77F2B68A753BD28D05662CCDD682610EF092960D30C9599E21634B6F96C435721D7FD74C4277C3132A97BEFFCC7B84C0ABFF869D1B66245E2735A21E2BF9D8E04CD1DC886A0F59D710FC2C890AFCE96074CFA45000EE48D60132856871494F72C263C2B8731262E50886B6338DA36311CE207FCC56AC97E143395091E8FFB937251713DD68D955FE47D84F4884DF457C9096E29E5E390E8E649DFA8EFA1E90F81ED7A3B2A3EB078EE2C19E86AC20379839745CF9E94B84B0B8E1CFEBC9E0B65C5C7216DA90A84F207307376AFB5EE2BB389D43851EEFB241F72D940A5600D3CAA4CA399723BEDE32BECB1CEAF09334735D81F1C3E7657D7806B9F36E13B51D749C877A262B2BD9B8B8433033B48CED537E553B890213EB48D9FF6866714DD47484BFF47A612446523A432E7847F12CC33CFBF3A97B1B54665069C40DEB902B741EE1C457A3375",    "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_B5944FEA37BF33E189978381CD9ED8EF78608D7EECFB9DCEC2F00781278EE8CE7BB57C20A75F156526E2507FDE1938C601FE3CB126DCBA85C9E1057D1374BAB71ADA77C51A9C00F82F68745EB63D082F1319F81B3A47C1E29A1D2EC0ACEF10A88B3B98C922D34944518A39CFDF3AF68DB7E616A5BE33AB00FB4B68D3EE77319BF9BD1FE9E57F8BA2B1D3AEB77BC932F37C16CC5F2E9D0A8467FBEE697834F0107A58326B0CD6FD73AB5067CEF2149834E20AD7EA06ACD0765B2105B148193743215353E11A502957BF104716A2DDECEE4C0619945DEB7DEDCC637EC32565976DFB9452CA6FE3E034B8B48433C5BCC6FD6EB32B408916EEDFC8C983832717CA7AF8695E70A49BB42431FE52FE685558DF6DD6A4F85F32B6B52644E650AFC5732244B9780E50773EB802D6160144C7B3FA2807184C2EA7F9194DEF867D9F52669778E3B4E7CBF2E5E53000D4F2E88559F8BD0F8B16B6E7E3E20ABAA6AC0B96A39CAA1A345C9896AD6C0A2A80A9499552F4DC688A4E7D9C40CACA4BC6A1EDA0C8A52262ABC01ADAF553213FE8D6388F9800CF57B0A308CA6034147FD25D259ECB3B9A6E376A7F122D419064FE8D6D06B909033C5102D91C3C29F151FC035366E750DD30157F0FE9C5A9C01335F294964EAF281435F82C315D5F7FD9AFC198B9A2D90BFD7410194EF70CD994DA5F999F4905DBD00B0C71B0D3C9B0F03D44035D4F423EC0E000E1B3F423A0E52E8FE67825FAC1327B8FF7454B4CE6B2CAC186A8E7FB0A5DAA52497D6FB7D1D0E95D2E07024C3706D9429FFD1A1CB18C1B463BBCB372AE6A73A2B6D5CDE34178447E74F929CA735998C95D786F00AC03A1BA0667407675DACA90FBAF3C35B93B7F54E5A2FB0FA747D354DB38AA7B7E149C2CD040F7A90FCA85360519B964F73675AA81660C9CB4BDBC3BE514CC553BD05AC01212BD6AF34035B2",    "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_9BAF53AD9818CFE68B518D9AA43E3E67F11E3159F63AEC6CE8C16FBDB611BB39D83A06045D57ABD10A23438DEDDB69B4216EEB449E5F151784C77BACF265DF482674401FDA5FE6A0A32300B9DBD5954E74C0BBB178D848A8B8BE6C89DF842F126F549E8A6E2486FDC2AD21BE0F02DE80FC717FA3544CA6B44729F889C1CC2E0788035D53ECACF2B395C9C6515AE197CF3686799B4CC548E13ED4B6E4A557D3B4599E88AF04001C0DBEB9F2C31872C66F4826B5B40976B2FF7AD8911FFDE08AA3C7142502D42102F9E7725E4C7472C5425F95FB4947C8CF4023E55F2E33A3150EF87035B2EB142AC66AC97288810557CA7809E47D7F24CFA63286444E2F3C3624486D95B012FDE3B1D9A45ABF8EDB543C41582836AF0457ED3C591B72FD31235894CA794F6678FB4B93925171E7AA6E64F7675B3D0C2FC6FE9453318B9C3D07C7328DF24EF7B4904F86B6FAF20ADAE764340987511E7379334A64A35B8A926C146FF4A80ED0DEF6F043B90407ECA416E76F4DD6A03C4C26F2ED1551F9E34B3774E2DF023B288C87294D75F635034B6EF4746D38AF1A8CA494F434A068ED48F203F75A905F0F2469FA2B42BFC72776B20150530416CF467231DE27B84BEB7406CDCF7E5E445420D453F05BDE01DC9780E3F4619425303478C05731877BB25C564836EF5130C63CB6265E75ED895FAE679DC8CFAA0B9B676C046FF62BE56C1D0841B330DDF4B0CF173EA84D2D09B268DF941E16F6D9EE1B45B75A4E5CE5B0E603553F5D3A5021D269F1A392793F3C986EA0624D220DE0E8AF5A99D12FB3CB40DAAFCB0D3E725BFB9028E383C7D0B5D34D1437BE301F58F41524888D06FC0491615A94F9A10EAF15F5C1B19D62B7A07CEBD3B35E0A6008A699556EBCA11A14CFD91F913A103BC1DB13A817B99AE17DCD9A946CF8BFD237470B5A2F18649FBE2CB57930EE3B4E"
        "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_12F67C17393B554878D6C360E88F2CA98C05D8D8157DCA3E2323D8BA5A579AF65354B3053B655BCAB0EAB992300216684C64D2F0F5C6712F7713828665D160EDD6464FE8BED60008065F3C9B2F2B454512274066713C25D8626EF2CF79E744B23FB70CDC7F1BC4D058810D0ACAADADCA35FD51D2C87FA4807199E0F677F74A6B49B979BDC7776293E596C9F00A4F5F6E8B6E3998BCB9C4524E8D99B90B2D45BCEC271C4D846EEDEB874D9CFA8CD65C2EC14E05A7E2930B2204E8BDA9EDAD1B77A96A3784D9338F8842F88D1314E1574AF9341DC1BB3C4AF9524C38E0922A1CC8F1317109566A2C7351486D7BDC73733EB736C4347E7CDF91A528C4BE4A09E81E84DAAF6E8ECFACAA1FC372A019BCE7F42F634BFFA857F64EE563C26AFFDC5237799F3868F301767FD9CE9E2F90A086266F00593D04633013CE646A67A79BE50124C015075A789AE983E59C27FDC0E63C2058F11497B6BFCE754FE6D714E45931066F55BD6179AFE075185EE11AAD414E892D7A1DD718450CBA44A9326E5B0FC5603A17CC8C482E634BD9D2E794BE6769BC325CB340139202C3B2EEE8AAED401BF5F1A005C2EB7B7CED5646A99EAFC08E9CC0F296362E64243070707D57F95754C568E71F07757C579CA50A747BA6AB7495D4D113E4FE5FF567135681E3DE28153A7AFE780929D7A79AB0ECD1E0DC12F8A187B1A25AC9258E27236221D6958C1BDD63084BD0F42D9BD0BFBD06EEAC75AF206B2177DEBEA83933FED5556ED3F9AF12A85DBC921D968E85473A58C9799D2E0F0CC1A40EA4625D40846D7833955BF8A86E42BEDA5D997CAE101BC2410007F6BC3D03A4CF62A12698321A1D0822F25FF0795BEA07EC6A9BA07FE591E61C848AE2F9CD648543F97737A3BA586B0AD2C30724588F1CEA9A520DD9D957B79067160BFB66F0616ED1D3FE9DDA7DDCB445CB963F3CF1",
        "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_53D458E5E317098C98EA70D8141BE2B98F8ECC53C5A562679F19C3B7FEBF93D86B9437A2B3971DEBE2DB561D6F8A14ED7CAC311BA60A02A1E75FF3FA9CEA13A8CB0CC36497EE5E5F5C51D8393BF0A76F1C555C7CD90CBA0A83A46E7936BE22433A31DB13E342E9C825E5A4FFBA01EB7F460A69687275562FE8178F21B7BCF0A76FE354BA65B80945AB9AB43D00F2D6D03000129BA81D106A64DDA416BC90EBFE2F6D0A46082C3C2F325E3FB00A0C8353DDB0EE6EB506C3F250333D1277F0737F5CD1353CECE2481EE86DEB1F5BE467DD535E4D58EB2C0A423B6D48D76696AE417023996949862954CA53699CDFE15313CF91FCB337E7C000AF9DCA30C6F31948F57559BF9DD151F3F6B491873D1A2E504FE3846AC67E20A248DE6B25FD818D79632F2D21039598F8983741C894ECDDCAC587A77EC16D4175FE4A18B606612743744C088AA8AA1EFDF13D84463BD874439CF7DFF216D2F0B34E4B37E8E8F58DB99EE11B99FEB52169A5BA647A25270F4F46F17C24CBEF2C58CE02EE33713D48FD7889D8CF"
    ],
    "LaunchMode": "RobloxBootstrapper"
}

""" 
I recommend using this browser extension:

    https://chrome.google.com/webstore/detail/roblox-multi-accounts/cmeicimcdhgohgjmpmcdpakjjdohhocg
    

You could use the cookies for 

for Cookie in config["Cookies"]:
    startroblox(PlaceID, JobID, Cookie)
    time.sleep(4)

"""

PlaceID, JobID = 3290718502, "845ca8fb-cbbf-4e79-b875-005b6a372878"
Bots = 2
TimeBetween = 9 # Time to sleep after each join. (Seconds)

for i in range(Bots):
    Cookie = config["Cookies"][i]
    threading.Thread(target=startGame, args=(PlaceID, JobID, Cookie)).start()
    time.sleep(TimeBetween)
